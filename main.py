import nltk
from nltk.tokenize import wordpunct_tokenize
import sys

# Загружаем необходимые ресурсы
try:
    nltk.download('punkt')
except Exception as e:
    print("Ошибка при загрузке ресурсов NLTK:", e)
    sys.exit(1)

# Словарь ключевых слов и соответствующих ответов
responses = {
    "привет": "Привет! Чем могу помочь?",
    "пока": "До свидания! Хорошего дня!",
    "дела": "У меня всё отлично, спасибо!\nВолгоИнвест является частью динамично развивающейся группы компаний МАСТ, в состав которой входят производственные и сбытовые предприятия, занимающиеся разработкой, локализацией, выпуском и поставкой специальной техники различного назначения и грузоподъемных механизмов. ГК «МАСТ» — промышленный холдинг, объединяющий предприятия по производству и поставке спецтехники, коммунального оборудования и кран-манипуляторных установок. В состав входят: ООО «СПМ», ООО «ИКран» (Республика Татарстан), АО «КОММАШ» и ООО «ВолгоИнвест». ГК «МАСТ» активно реализует программы импортозамещения и локализации, обеспечивая высокотехнологичную продукцию для ключевых отраслей экономики. Компания активно развивает международную кооперацию, участвуя в проектах с зарубежными партнёрами и расширяя экспортный потенциал российской промышленности. Общий объем реализуемой спецтехники группой МАСТ превышает 1500 единиц в год. На предприятиях трудоустроены более 1000 сотрудников.",
    "помощь": "Я могу рассказать о компании, про нашу продукцию, о нашем сервисе, про вакансии, поздороваться и попрощаться.",
    "вакансии": "У нас есть вакансия Менеджер по продажам.\nДолжностные обязанности:\n- взаимодействие с клиентами с целью увеличения объема продаж автокранов, кран-манипуляторных установок (КМУ) и другой специальной техники;\n- продажа грузовых автомобилей, спецтехники, дорожно-строительной техники, прицепов, полуприцепов;\n- формирование коммерческих предложений;\n- ведение переговоров, консультирование клиентов по техническим характеристикам и устройству автомобилей;\n- контроль заказов, отгрузок, дебиторской задолженности;\n- выполнение плана продаж, ведение отчетности.\nТребования:\n- опыт продаж сложной техники не менее 2-х лет (в том числе электроника, станки, оборудование), имеющим опыт продаж грузовой техники или автобусов - ПРЕДПОЧТЕНИЕ;\n- интерес к автомобильному рынку, техническая грамотность;\n- клиентоориентированность;\n- активность;\n- инициативность;\n- грамотная речь;\n- наличие личного автомобиля и техническое образование будет вашим преимуществом!\nГрафик работы:\n- 5/2 с 9.00 до 18.00 часов.",
    "вакансия": "У нас есть вакансия Менеджер по продажам.\nДолжностные обязанности:\n- взаимодействие с клиентами с целью увеличения объема продаж автокранов, кран-манипуляторных установок (КМУ) и другой специальной техники;\n- продажа грузовых автомобилей, спецтехники, дорожно-строительной техники, прицепов, полуприцепов;\n- формирование коммерческих предложений;\n- ведение переговоров, консультирование клиентов по техническим характеристикам и устройству автомобилей;\n- контроль заказов, отгрузок, дебиторской задолженности;\n- выполнение плана продаж, ведение отчетности.\nТребования:\n- опыт продаж сложной техники не менее 2-х лет (в том числе электроника, станки, оборудование), имеющим опыт продаж грузовой техники или автобусов - ПРЕДПОЧТЕНИЕ;\n- интерес к автомобильному рынку, техническая грамотность;\n- клиентоориентированность;\n- активность;\n- инициативность;\n- грамотная речь;\n- наличие личного автомобиля и техническое образование будет вашим преимуществом!\nГрафик работы:\n- 5/2 с 9.00 до 18.00 часов.",
    "сервис": "Выездной автосервис грузового автотранспорта, специальной и грузовысотной техники – это обслуживание и ремонт машин на объекте заказчика. Такая услуга избавляет клиентов от дорогостоящей транспортировки крупногабаритной сломанной техники или тяжеловесных агрегатов на СТО, минимизирует время простоя машин и финансовые потери предприятия.",
    "обслуживание": "Выездное техническое обслуживание – перечень услуг:\nДиагностика неисправностей;\nРегламентное техническое обслуживание, в том числе КМУ и автокранов;\nТекущий гарантийный и послегарантийный выездной ремонт спецтехники;\nВыездной ремонт гидравлических систем;\nВыездной ремонт генераторов и другого электрооборудования;\nРемонт двигателей и агрегатов (бензиновых, дизельных, газовых);\nДиагностика, ремонт и замена КПП;\nПредоставление диагностической карты по итогам выполненных работ.",
    "компания": "ВолгоИнвест является частью динамично развивающейся группы компаний МАСТ, в состав которой входят производственные и сбытовые предприятия, занимающиеся разработкой, локализацией, выпуском и поставкой специальной техники различного назначения и грузоподъемных механизмов. ГК «МАСТ» — промышленный холдинг, объединяющий предприятия по производству и поставке спецтехники, коммунального оборудования и кран-манипуляторных установок. В состав входят: ООО «СПМ», ООО «ИКран» (Республика Татарстан), АО «КОММАШ» и ООО «ВолгоИнвест». ГК «МАСТ» активно реализует программы импортозамещения и локализации, обеспечивая высокотехнологичную продукцию для ключевых отраслей экономики. Компания активно развивает международную кооперацию, участвуя в проектах с зарубежными партнёрами и расширяя экспортный потенциал российской промышленности. Общий объем реализуемой спецтехники группой МАСТ превышает 1500 единиц в год. На предприятиях трудоустроены более 1000 сотрудников.",
    "компании": "ВолгоИнвест является частью динамично развивающейся группы компаний МАСТ, в состав которой входят производственные и сбытовые предприятия, занимающиеся разработкой, локализацией, выпуском и поставкой специальной техники различного назначения и грузоподъемных механизмов. ГК «МАСТ» — промышленный холдинг, объединяющий предприятия по производству и поставке спецтехники, коммунального оборудования и кран-манипуляторных установок. В состав входят: ООО «СПМ», ООО «ИКран» (Республика Татарстан), АО «КОММАШ» и ООО «ВолгоИнвест». ГК «МАСТ» активно реализует программы импортозамещения и локализации, обеспечивая высокотехнологичную продукцию для ключевых отраслей экономики. Компания активно развивает международную кооперацию, участвуя в проектах с зарубежными партнёрами и расширяя экспортный потенциал российской промышленности. Общий объем реализуемой спецтехники группой МАСТ превышает 1500 единиц в год. На предприятиях трудоустроены более 1000 сотрудников.",
}

def recognize_keywords(user_input):
    """
    Распознаёт ключевые слова в сообщении пользователя на русском языке.
    """
    try:
        # Токенизация с учетом кириллицы
        tokens = wordpunct_tokenize(user_input.lower())
        recognized = []

        for keyword in responses:
            for token in tokens:
                if keyword in token:
                    recognized.append(keyword)
                    break  # Можно выйти из внутреннего цикла — нашли совпадение
        return recognized

    except Exception as e:
        print("Ошибка при распознавании ключевых слов:", e)
        return []

def generate_response(keywords):
    """
    Возвращает ответ на основе найденных ключевых слов.
    """
    try:
        if not keywords:
            return "Извините, я не понял ваш вопрос."
        else:
            return responses[keywords[0]]
    except Exception as e:
        print("Ошибка при генерации ответа:", e)
        return "Произошла ошибка при формировании ответа."

def main():
    print("Чат-бот: Привет! Я простой бот. Задай мне вопрос или напиши 'пока' для выхода.")
    while True:
        try:
            user_input = input("Вы: ")
            if user_input.lower() in ["пока", "выход", "до свидания"]:
                print("Чат-бот:", responses.get("пока"))
                break

            keywords = recognize_keywords(user_input)
            response = generate_response(keywords)
            print("Чат-бот:", response)

        except KeyboardInterrupt:
            print("\nЧат-бот: Пока!")
            break
        except Exception as e:
            print("Произошла ошибка в основном цикле:", e)

if __name__ == "__main__":
    main()
